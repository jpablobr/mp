#!/usr/bin/env bash

# focus command line completion.
# Copyright 2011 Jose Pablo Barrantes <xjpablobrx@gmail.com>
# Licensed under MIT

: ${have=$(command -v focus)}

test -n "$have" &&
_focus_complete() {
    COMPREPLY=()
    HOME=~
    if [ $COMP_CWORD = 1 ]; then
        notes=`focus -l | sed s:$HOME/.private/notes/::g | sed s:\.md::g`
        COMPREPLY=(`compgen -W "$notes" -- $2`)
    fi
    return 0
}

alias fcs='focus'
alias fcse='focus -e'
alias fcsl='focus -l'
alias fcsa='focus -a 5 &'
alias fcsk="ps aux | grep \"[f]ocus\" | cut -f2 -d' ' | xargs kill -9"

fcsr() {
    ps aux           |
    grep [f]ocus     |
    cut -f3 -d' '    |
    xargs kill -9

    focus -a 5 &
    exit 0
}

test -n "$have" && complete -F _focus_complete -o default focus fcs fcse